var recentlyClosed={showCount:8,newTab:function(a,g,f,b){var c;try{c=localStorage.tabs!=undefined?JSON.parse(localStorage.tabs):new Array}catch(d){c=new Array}c.unshift({windowId:a,id:g,title:f,url:b});localStorage.tabs=JSON.stringify(c)},update:function(a,h,g,b){var d;try{d=localStorage.tabs!=undefined?JSON.parse(localStorage.tabs):new Array}catch(f){d=new Array}for(var c=0;c<d.length;c++){if(d[c].id==h&&d[c].windowId==a){d[c].url=b;d[c].title=g;break}}localStorage.tabs=JSON.stringify(d)},add:function(b,d){var g;try{g=localStorage.tabs!=undefined?JSON.parse(localStorage.tabs):new Array}catch(h){g=new Array}var c;var j;for(var f=0;f<g.length;f++){if(g[f].id==d&&g[f].windowId==b){c=g[f].url;j=g[f].title;g.splice(f,1);break}}localStorage.tabs=JSON.stringify(g);if(c!=undefined&&c.indexOf("chrome://")==-1&&c.indexOf("chrome-extension://")==-1&&c.indexOf("chrome-devtools://")==-1){var a=localStorage.closedTabs!=undefined?JSON.parse(localStorage.closedTabs):new Array;if(a.length>=this.showCount){a.pop()}a.unshift({title:j,url:c});localStorage.closedTabs=JSON.stringify(a)}},show:function(){chrome.history.search({text:""},function(b){var a;try{a=localStorage.closedTabs!=undefined?JSON.parse(localStorage.closedTabs):new Array}catch(d){a=new Array}if(a.length>0){for(var c=0;c<a.length;c++){$("#rc_content").append('<a class="rc clearfix" href="'+a[c].url+'" title="'+a[c].title+'"><img width="16" height="16" class="favicon" src="chrome://favicon/'+a[c].url+'" /><p>'+recentlyClosed.formatTitle(a[c].title,18)+"</p></a>")}$("#rc_content").masonry({isAnimated:true,animationOptions:{duration:500,easing:"linear",queue:false},isFitWidth:true});$(".rc").hover(function(){$(this).css("border","1px solid #ccc")},function(){$(this).css("border","none")})}$("#recently_closed .title").toggle(function(){$(this).next().slideUp("fast");localStorage[$(this).parent().attr("id")]="close";$(this).children("img").attr("src","img/arrow_right.png")},function(){$(this).next().slideDown("fast");$("#rc_content").masonry("destroy");$("#rc_content").masonry({isAnimated:true,animationOptions:{duration:500,easing:"linear",queue:false},isFitWidth:true});localStorage[$(this).parent().attr("id")]="";$(this).children("img").attr("src","img/arrow_down.png")});if(localStorage.recently_closed=="close"){$("#rc_content").css("display","none");$("#recently_closed .title img").attr("src","img/arrow_right.png");$("#recently_closed .title").trigger("click")}else{$("#recently_closed .title img").attr("src","img/arrow_down.png")}})},formatTitle:function(d,c){if(d==undefined){return""}var b=0;for(var a=0;a<d.length;a++){if(escape(d.charAt(a)).length<4){b++}else{b+=2}if(b>c){return d.substring(0,a)+"..."}}return d}};